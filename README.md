# Приложение для отслеживания аллергий (AllergyTracker)

## Описание проекта

AllergyTracker - это мобильное приложение для Android, разработанное для помощи людям, страдающим от аллергии. Приложение позволяет пользователям отслеживать свои аллергии, проверять продукты на наличие аллергенов, получать информацию об известных аллергенах и искать подходящие рецепты блюд.

## Основной функционал

### 1. Аллергический трекер
- Регистрация типов аллергий и симптомов
- Отслеживание приема лекарств и напоминания
- Календарь состояния и симптомов для медицинской истории

### 2. Справочник аллергенов
- База данных распространенных аллергенов с описанием
- Интеграция с медицинскими API (NCBI) для научной информации
- Получение информации из Википедии для общих сведений

### 3. Проверка продуктов
- Сканирование штрих-кодов с использованием камеры
- Интеграция с базой данных Open Food Facts
- Использование дополнительной базы данных barcode-list.ru для российских продуктов
- Анализ состава продуктов на наличие аллергенов пользователя
- Предупреждения и альтернативные рекомендации

### 4. Генератор безопасных рецептов
- Поиск рецептов без аллергенов пользователя
- Интеграция с API Spoonacular для получения рецептов
- Фильтрация рецептов по диетическим ограничениям

## Технические особенности

- **Архитектура**: MVVM (Model-View-ViewModel)
- **Язык программирования**: Kotlin
- **Библиотеки и фреймворки**:
  - Retrofit для работы с API
  - Room для локального хранения данных
  - LiveData и ViewModel из Android Architecture Components
  - CameraX для работы с камерой
  - ML Kit для распознавания штрих-кодов
  - Coroutines для асинхронных операций
  - Glide для загрузки изображений

## Внесенные улучшения и исправления

В ходе разработки были внесены следующие улучшения:

1. **Исправление дублирования интерфейсов** - устранено дублирование интерфейса OpenFoodFactsApi
2. **Разрешение конфликтов имен** - переименован класс Product в ApiProduct в файле ProductResponse.kt
3. **Улучшение работы сканера штрих-кодов**:
   - Добавлена поддержка всех форматов штрих-кодов
   - Реализовано подробное логирование для отладки
   - Улучшена обработка ошибок
4. **Исправление API-интеграций**:
   - Скорректирован базовый URL для API Википедии
   - Добавлен актуальный API-ключ для сервиса Spoonacular
   - Исправлены пути в запросах к API
5. **Расширение источников данных**:
   - Добавлена возможность получения информации о российских товарах с сайта barcode-list.ru

## Требования к устройству

- Android 6.0 (API уровень 23) или выше
- Камера (для сканирования штрих-кодов)
- Доступ в интернет
- Минимум 100 МБ свободной памяти
- Разрешения:
  - Камера
  - Интернет
  - Хранение данных
  - Уведомления (для напоминаний)

## Как запустить проект

### Требования для разработки:
- Android Studio Arctic Fox (2020.3.1) или новее
- JDK 11 или выше
- Gradle 7.0.2 или выше

### Шаги по запуску:

1. **Клонирование репозитория**:
   ```bash
   git clone <URL репозитория>
   cd AllergyTrackerr
   ```

2. **Открытие проекта в Android Studio**:
   - Запустите Android Studio
   - Выберите "Open an existing Android Studio project"
   - Укажите путь к клонированному репозиторию

3. **Настройка API-ключей**:
   - Для полноценной работы приложения необходимы следующие API-ключи:
     - Spoonacular API (уже добавлен в код)
     - Open Food Facts (не требует ключа)
     - barcode-list.ru (опционально, для российских товаров)

4. **Сборка проекта**:
   - Выберите "Build > Rebuild Project" в Android Studio
   - Дождитесь завершения сборки

5. **Запуск на устройстве или эмуляторе**:
   - Подключите физическое устройство или настройте эмулятор
   - Нажмите "Run > Run 'app'" в Android Studio

## Дополнительные источники данных

### Использование базы данных barcode-list.ru

Для улучшения распознавания российских товаров в приложении реализована возможность получения информации с сайта barcode-list.ru. Этот источник используется в следующих случаях:

1. Если продукт не найден в базе данных Open Food Facts
2. Если штрих-код соответствует формату российских товаров (обычно начинается с 460-469)
3. Для получения дополнительной информации о производителе

Преимущества использования barcode-list.ru:
- Более полная информация о российских товарах
- Данные о региональных продуктах
- Информация о производителях

## Возможные проблемы и решения

1. **Проблема**: Не сканируются некоторые штрих-коды
   **Решение**: Убедитесь, что у камеры достаточно света и штрих-код находится в фокусе

2. **Проблема**: Продукт не найден в базе данных
   **Решение**: База Open Food Facts и barcode-list.ru пополняются пользователями. Вы можете добавить продукт на соответствующих сайтах

3. **Проблема**: Не работают запросы к API
   **Решение**: Проверьте подключение к интернету и актуальность API-ключей

4. **Проблема**: Уведомления не работают на некоторых устройствах
   **Решение**: Проверьте настройки уведомлений для приложения в системных настройках

5. **Проблема**: Проблемы с совместимостью на старых устройствах
   **Решение**: Приложение оптимизировано для Android 6.0 и выше. На более старых версиях возможны проблемы

## Планы по развитию

1. Добавление социальных функций для обмена опытом
2. Интеграция с медицинскими устройствами (например, пульсоксиметры)
3. Расширение базы данных аллергенов
4. Добавление функционала для оффлайн-работы
5. Интеграция с электронными медицинскими картами
6. Расширение поддержки российских баз данных продуктов и их состава
7. Создание собственной базы данных продуктов с аллергенами

## Лицензия

Данный проект распространяется под лицензией MIT.

## Контакты для связи

По всем вопросам и предложениям обращайтесь:
- Email: example@email.com
- GitHub: [ссылка на профиль GitHub]

